@model AuctionShowViewModel
@using Lang = Auctioneer.Resources.Auction.Show;

@{
	Layout        = "~/Views/Shared/_Layout_with_search_and_breadcrumb.cshtml";
	ViewBag.Title = "Show";
}

@section head
{
	<link rel="stylesheet" href="~/Content/Libraries/Lightbox/lightbox.css" />
}

<main class="auction-details">
	
	<header>
		@if(Model.CanBeRemoved)
		{
			<div class="control-panel">
				@Html.ActionLink(Lang.DeleteAuction, "Delete", cssClass: "btn btn-danger", routeValues: new { id = Model.Id })
			</div>
		}

		<h1>@Html.DisplayFor(x => x.Title)</h1>
		<div class="end-time">@Lang.EndingIn @Html.DisplayFor(x => x.TimeTillEnd) (@Html.DisplayFor(x => x.EndDate))</div>
		
		<div class="basic-info">
			
			<div class="column">
				<div class="dl-horizontal">
					<dt>
						@Html.DisplayNameFor(model => model.SellerUserName)
					</dt>
					<dd>
						@Html.DisplayFor(model => model.SellerUserName)
					</dd>
				</div>
				
				@if(!String.IsNullOrWhiteSpace(Model.BuyerUserName))
				{
					<div class="dl-horizontal">
						<dt>
							@Html.DisplayNameFor(model => model.BuyerUserName)
						</dt>
						<dd>
							@Html.DisplayFor(model => model.BuyerUserName)
						</dd>
					</div>
				}
			</div>

			<div class="column">
				<span class="price">@Html.DisplayFor(x => x.Price)</span>
				
				@if(Model.CanBeBought)
				{
					@Html.ActionLink(Lang.Buy, actionName: "Buy", cssClass: "btn btn-primary buy-button", routeValues: new
					{
						id = Model.Id
					})
				}
				else
				{
					<button type="button" class="btn btn-primary buy-button" disabled="true">@Lang.Buy</button>
				}
			</div>
		</div>
				
		<div class="photos">
			@foreach(var photo in Model.Photos)
			{
				<a href="@photo.Url" data-lightbox="auction-photos">
					<img src="@photo.Url" width="150" height="150">
				</a>
			}
		</div>
	</header>

	<div class="auction-description">
		@Html.DisplayFor(x => x.Description)
	</div>

</main>

@section scripts
{
	<script src="~/Content/Libraries/Lightbox/lightbox.min.js"></script>
}
